syntax = "proto3";

package trpc.wealthai.strategy_spec;

import "google/protobuf/empty.proto";

option go_package="github.com/wealthai-cc/protocol/strategy_spec";

// 账户类型
enum AccountType {
    INVALID_ACCOUNT_TYPE = 0;
    SIMULATE_ACCOUNT_TYPE = 1; // 模拟交易专用账户（可支持保证金操作）
    CASH_ACCOUNT_TYPE = 2; // 现金账户
    MARGIN_ACCOUNT_TYPE = 3; // 保证金账户
}

// 货币类型
enum CurrencyType {
    INVALID_CURRENCY_TYPE = 0;
    USDT_CURRENCY_TYPE = 1; // USDT（泰达币）
    USDC_CURRENCY_TYPE = 2; // USDC（Circle 稳定币）
    USD_CURRENCY_TYPE = 3; // USD（美元）
    HKD_CURRENCY_TYPE = 4; // HKD（港币）
}

message Currency {
    CurrencyType currency_type = 1; // 货币品种
    double amount = 2; // 货币数量
}

message Balance {
    Currency free = 1; // 可用余额
    Currency locked = 2; // 冻结余额（被下单、提现或保证金锁定）
}

enum PositionSide {
    INVALID_POSITION_SIDE = 0;
    LONG_POSITION_SIDE = 1; // 多头
    SHORT_POSITION_SIDE = 2; // 空头
}

message Position {
    PositionSide position_side = 1; // 持仓方向
    string symbol = 2; // 品种代号
    double quantity = 3; // 持仓数量
    Currency average_cost_price = 4; // 平均持仓成本价
    Currency unrealized_pnl = 5; // 未实现盈亏
    Currency realized_pnl = 6; // 已实现盈亏
    Currency initial_margin = 7; // 初始保证金
    Currency maintenance_margin = 8; // 维持保证金
    Currency position_pnl = 9; // 持仓盈亏
}

message Account {
    string account_id = 1; // 账户唯一标识（系统登记的账户ID）
    AccountType account_type = 2; // 账户类型（模拟/现金/保证金）
    repeated Balance balances = 3; // 账户余额明细（可用/冻结）
    repeated Position positions = 4; // 账户持仓明细
    Currency total_net_value = 5; // 总资产净值（NAV）
    Currency available_margin = 6; // 可用保证金
    double margin_ratio = 7; // 保证金率（维持保证金/总资产净值）
    double risk_level = 8; // 风险度（0-100，越高越危险）
    double leverage = 9; // 当前使用的杠杆倍数
}
