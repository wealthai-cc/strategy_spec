# Implementation Tasks

## 1. 改进K线数据生成算法
- [x] 1.1 增加波动幅度倍数（从3倍提升到5-8倍，根据市场类型调整）
- [x] 1.2 添加价格跳空模拟（开盘价与前一根K线收盘价的差异）
- [x] 1.3 添加连续涨跌模式（模拟市场情绪）
- [x] 1.4 添加震荡区间模式（价格在一定区间内震荡）- 已在趋势因子中实现
- [x] 1.5 改进成交量生成（与价格波动、涨跌幅、价格位置强相关）
- [x] 1.6 确保OHLC关系真实（包含上/下影线，符合真实K线形态）

## 2. 使用BacktestEngine执行完整回测
- [x] 2.1 修改 `test_strategy.py`，对于使用 `run_daily` 的策略使用 `BacktestEngine`
- [x] 2.2 确保遍历每根K线执行策略
- [x] 2.3 收集整个回测周期内的所有订单
- [x] 2.4 确保账户状态在每根K线之间正确更新
- [x] 2.5 验证订单时间戳正确对应到对应的K线

## 3. 增强数据真实性
- [x] 3.1 根据市场类型调整波动特征（A股、美股、港股、加密货币）
- [x] 3.2 支持趋势模式（上升、下降、震荡）- 已在价格趋势因子中实现
- [ ] 3.3 支持突发事件模拟（可选）- 暂不实现

## 4. 测试与验证
- [x] 4.1 测试生成的K线数据波动性是否足够大
- [x] 4.2 验证生成的K线数据是否满足策略触发条件（确保有足够的买入/卖出机会）
- [x] 4.3 验证买卖点是否在整个回测周期内分布
- [x] 4.4 验证账户状态更新是否正确
- [x] 4.5 验证订单时间戳是否正确
- [x] 4.6 使用实际策略（double_mean.py）验证回测结果

