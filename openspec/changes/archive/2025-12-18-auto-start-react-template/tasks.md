# Tasks: 自动启动 React 模板

## 1. 实现 React 服务器启动模块

- [ ] 1.1 创建 `visualization/react_launcher.py` 模块
  - [ ] 实现 `ReactLauncher` 类
  - [ ] 实现服务器检测方法（检测端口 5173）
  - [ ] 实现启动方法（使用 subprocess 启动 npm run dev）
  - [ ] 实现等待就绪方法（轮询检测服务器是否可用）
  - [ ] 实现进程管理方法（跟踪进程、关闭进程）

- [ ] 1.2 添加错误处理
  - [ ] 处理 npm 未安装的情况
  - [ ] 处理端口被占用的情况
  - [ ] 处理服务器启动失败的情况
  - [ ] 提供清晰的错误提示

- [ ] 1.3 添加配置选项
  - [ ] 支持自定义端口（默认 5173）
  - [ ] 支持自定义等待超时时间（默认 30 秒）
  - [ ] 支持自定义轮询间隔（默认 0.5 秒）

## 2. 集成到测试工具

- [ ] 2.1 修改 `test_strategy.py`
  - [ ] 导入 `ReactLauncher` 模块
  - [ ] 在自动预览功能中添加 React 启动逻辑
  - [ ] 检测 React 是否运行，如果没运行则自动启动
  - [ ] 等待 React 服务器就绪后再继续

- [ ] 2.2 添加命令行参数
  - [ ] 添加 `--no-auto-start-react` 参数（禁用自动启动）
  - [ ] 添加 `--react-port` 参数（自定义端口）
  - [ ] 更新帮助信息

- [ ] 2.3 改进用户体验
  - [ ] 添加启动进度提示
  - [ ] 显示服务器启动状态
  - [ ] 简化输出信息

## 3. 结合预览服务器生命周期管理

- [ ] 3.1 修复预览服务器生命周期问题
  - [ ] 实现非 daemon thread 或进程级服务器
  - [ ] 确保服务器在测试完成后继续运行
  - [ ] 提供优雅的关闭机制

- [ ] 3.2 统一服务器管理
  - [ ] 统一管理 React 服务器和预览服务器
  - [ ] 提供统一的关闭方法
  - [ ] 处理服务器异常退出

## 4. 测试和文档

- [ ] 4.1 编写单元测试
  - [ ] 测试 React 服务器检测
  - [ ] 测试自动启动功能
  - [ ] 测试错误处理

- [ ] 4.2 编写集成测试
  - [ ] 测试完整流程（启动 React -> 运行测试 -> 打开预览）
  - [ ] 测试多个测试连续运行的情况
  - [ ] 测试服务器已运行的情况

- [ ] 4.3 更新文档
  - [ ] 更新 `test_strategy.py` 使用文档
  - [ ] 更新快速开始指南
  - [ ] 更新 README.md

## 5. 优化和清理

- [ ] 5.1 性能优化
  - [ ] 优化服务器检测速度
  - [ ] 优化启动等待时间

- [ ] 5.2 代码清理
  - [ ] 移除手动启动提示
  - [ ] 清理冗余代码
  - [ ] 添加代码注释

