# 开发范式说明 —— 按照 OpenSpec 标准

本项目采用 [OpenSpec](https://github.com/Fission-AI/OpenSpec) 范式进行需求、设计、开发和变更管理，确保规范性、一致性与可维护性。请所有贡献者严格遵循如下范式：

---

## 1. 文档结构规范

- **主规格**：`openspec.md` 为所有模块和接口的顶层索引，罗列每个子模块的规格文档路径与简述。
- **模块规格**：每个核心模块独立撰写规格（如 `spec_strategy_engine.md`、`spec_account.md`），内容至少包括接口定义、场景示例、字段说明和数据结构。
- **审查与评审**：所有文档和变更需在 `审查报告.md` 中进行记录，说明审查时间、发现问题、兼容性、建议与结论。

## 2. 需求与接口迭代流程

1. **需求提出**  
   - 新需求均须以 Issue/PRD 文档方式提出，描述背景、目标、影响模块。
2. **设计与规格撰写**  
   - 按 OpenSpec 格式（兼顾 proto 及人读性），首先补充/修改对应的 `spec_*.md` 文档（需包含接口示例、字段表解释、约束边界）。
3. **代码原型实现**  
   - 优先以标准 proto3 文件定义接口，所有字段、注释与规格文档同步更新。
   - 代码提交需引用/关联相关文档变更记录。
4. **评审与同步修正**  
   - Pull Request 须配套版本变更说明（Changelog），涉及接口需评审人核对文档一致性。
   - 遇到争议由文档审查报告最终裁定，明确原委与处置结果。

## 3. 规范与约束

- **风格统一**：文档采用一致的标题、列表、代码块风格，接口声明与示例代码保持同步。
- **数据一致性**：规格文档、proto 文件、示例代码三者内容需随时保持一致。
- **溯源可追踪**：每次变更需记录变更时间、责任人、影响范围及兼容性评估。
- **模块内聚**：每个功能模块文档须完整覆盖接口、字段说明、业务背景和使用范例。
- **外部引用**：需引用其他 OpenSpec 项目时，注明版本号和路径，确保交叉依赖可维护性。

## 4. 示例参考

- 请以 `PRD/openspec.md` 和 `spec_strategy_engine.md` 等为规范例稿。
- 所有添加的新字段、接口必须在相应文档内补充详细定义和示例。
- 示例代码块需采用 Markdown 代码格式，类型注明（如 `protobuf`、`python` 等）。

## 5. 开发最佳实践与协作说明

- 严禁无规格变更的直接代码提交。
- 各模块负责人需定期检查文档、接口与实现三者的一致性，并在 `审查报告` 中注明检查结果。
- 新开发成员请优先阅读本开发范式说明和主规格文档（`openspec.md`）。

---

> **目的**：确保所有项目参与者输出的接口、文档、实现三位一体高度一致，降低沟通与维护成本，提升扩展能力。
> 如有疑问、建议，务必于 Issue 区/会议中提出，由 OpenSpec 负责人裁定采纳。

